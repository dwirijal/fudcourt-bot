generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Ohlcv {
  id        Int      @id @default(autoincrement())
  symbol    String
  timeframe String
  timestamp BigInt
  open      Float
  high      Float
  low       Float
  close     Float
  volume    Float
  createdAt DateTime @default(now())

  @@unique([symbol, timeframe, timestamp])
  @@index([symbol, timeframe])
}

model CoinGeckoData {
  id                          String  @id // coin_id
  symbol                      String
  name                        String
  current_price               Float?
  market_cap                  Float?
  market_cap_rank             Int?
  fully_diluted_valuation     Float?
  total_volume                Float?
  high_24h                    Float?
  low_24h                     Float?
  price_change_24h            Float?
  price_change_percentage_24h Float?
  price_change_percentage_7d  Float?
  price_change_percentage_30d Float?
  circulating_supply          Float?
  total_supply                Float?
  max_supply                  Float?
  ath                         Float?
  ath_change_percentage       Float?
  ath_date                    String?
  atl                         Float?
  atl_change_percentage       Float?
  atl_date                    String?
  last_updated                String?
  fetched_at                  BigInt
}

model User {
  id        String   @id // Discord ID
  gold      Int      @default(0)
  potions   Int      @default(3)
  hasSword  Boolean  @default(false)
  xp        Int      @default(0)
  level     Int      @default(1)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
